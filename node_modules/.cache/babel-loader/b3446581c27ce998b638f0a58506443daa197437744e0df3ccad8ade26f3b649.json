{"ast":null,"code":"import React,{useState}from'react';import{doc,updateDoc,addDoc,collection}from'firebase/firestore';// Added addDoc, collection\nimport GlassCard from'./common/GlassCard';import{COLORS}from'../constants';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LoanCreditSystemLayout=_ref=>{let{userProfile,setUserProfile,db,appId,auth}=_ref;const[loanType,setLoanType]=useState('Personal Loan');// New: Loan type selection\nconst[loanAmount,setLoanAmount]=useState('');const[repaymentPeriod,setRepaymentPeriod]=useState('');const[interestRate,setInterestRate]=useState('');// This will be dynamically set or calculated\nconst[monthlyPayment,setMonthlyPayment]=useState(0);const[collateralLink,setCollateralLink]=useState('');// New: For collateral proof\nconst[downPayment,setDownPayment]=useState('');// New: For mortgage down payment\nconst[propertyRegion,setPropertyRegion]=useState('');// New: For mortgage property region\n// Function to determine credit score tier and associated information\nconst getCreditScoreTier=score=>{if(score>=800)return{tier:'Excellent',color:COLORS.primaryAccent,description:'VIP status, priority approval'};if(score>=750)return{tier:'Very Good',color:COLORS.primaryAccent,description:'Preferred rates, better limits'};if(score>=650)return{tier:'Good',color:COLORS.primaryAccent,description:'Credit card access, standard loans'};if(score>=550)return{tier:'Fair',color:'orange',description:'Small loans; secured card eligibility'};if(score>=400)return{tier:'Poor',color:'red',description:'No credit card access; loan denial'};return{tier:'Very Poor',color:'darkred',description:'No credit privileges, high risk'};};const creditScoreInfo=getCreditScoreTier(userProfile.creditScore);// Get loan terms based on type and credit score\nconst getLoanTerms=(score,type,amount)=>{if(type==='Personal Loan'){if(score>=700)return{max:3000000,rate:0.05,minTerm:12,maxTerm:36,collateralRequired:amount>1000000?'Optional':'No'};if(score>=600)return{max:1000000,rate:0.065,minTerm:6,maxTerm:24,collateralRequired:'No'};if(score<600)return{max:250000,rate:0.09,minTerm:3,maxTerm:12,collateralRequired:'Yes'};}else if(type==='Mortgage Loan'){if(score>=700)return{max:10000000,rate:0.045,minTerm:60,maxTerm:60,collateralRequired:'Always'};if(score>=600)return{max:5000000,rate:0.06,minTerm:48,maxTerm:48,collateralRequired:'Always'};if(score<600)return{max:0,rate:0,minTerm:0,maxTerm:0,collateralRequired:'Not Eligible'};}else if(type==='Business Loan'){// Placeholder for Business Loans\nif(score>=650&&amount<=5000000)return{max:5000000,rate:0.05,minTerm:12,maxTerm:36,collateralRequired:'Optional'};if(score<700&&amount>5000000)return{max:10000000,rate:0.07,minTerm:24,maxTerm:48,collateralRequired:'Yes'};}return{max:0,rate:0,minTerm:0,maxTerm:0,collateralRequired:'N/A'};};// Handle credit card application\nconst handleApplyForCreditCard=async()=>{try{// Submit request for admin approval\nawait addDoc(collection(db,`artifacts/${appId}/public/data/creditCardRequests`),{userId:auth.currentUser.uid,userName:userProfile.name,creditScore:userProfile.creditScore,employmentInfo:'Simulated Employment Info',// Placeholder\ncreditAgreement:'AGREE',// Placeholder\nstatus:'Pending',// Status will be updated by admin or automated check\ntimestamp:new Date().toISOString()});alert('Credit Card application submitted. Check your dashboard for status updates (may be auto-approved based on score).');}catch(error){console.error(\"Error submitting credit card application:\",error);alert(`Failed to submit Credit Card application: ${error.message}`);}};// Handle loan application\nconst handleApplyForLoan=async e=>{e.preventDefault();const amount=parseFloat(loanAmount);const period=parseInt(repaymentPeriod);const terms=getLoanTerms(userProfile.creditScore,loanType,amount);if(isNaN(amount)||amount<=0||isNaN(period)||period<=0){alert('Please enter valid loan amount and repayment period.');return;}if(amount>terms.max){alert(`Loan amount exceeds maximum allowed for your credit score (${userProfile.creditScore}) and loan type. Max: ‚ÇΩ${terms.max.toLocaleString()}.`);return;}if(period<terms.minTerm||period>terms.maxTerm){alert(`Repayment period must be between ${terms.minTerm} and ${terms.maxTerm} months for your loan type and credit score.`);return;}// Check for active personal loans (only 1 allowed)\nif(loanType==='Personal Loan'&&userProfile.loanHistory.some(loan=>loan.type==='Personal Loan'&&loan.status==='Active')){alert('You already have an active Personal Loan. Only one active personal loan is allowed at a time.');return;}// Check for missed payments (denial if 2+ in past 60 RP days)\nconst sixtyDaysAgo=new Date();sixtyDaysAgo.setDate(sixtyDaysAgo.getDate()-60);const recentMissedPayments=userProfile.loanHistory.filter(loan=>loan.status==='Missed Payment'&&new Date(loan.date)>sixtyDaysAgo).length;if(recentMissedPayments>=2){alert('Your loan application is denied due to 2 or more missed payments in the past 60 RP days.');return;}// Collateral checks\nif(terms.collateralRequired==='Yes'&&!collateralLink){alert('Collateral is required for this loan. Please provide a Discord message link for your asset.');return;}if(loanType==='Mortgage Loan'){const minDownPayment=500000;if(parseFloat(downPayment)<minDownPayment){alert(`Minimum down payment for Mortgage is ‚ÇΩ${minDownPayment.toLocaleString()}.`);return;}if(propertyRegion!==userProfile.region){alert('Property must be in your registered RP region.');return;}// Simulate property inspection\nalert('Simulating property inspection... (This would be an automated check)');}try{// Submit loan request for admin approval\nawait addDoc(collection(db,`artifacts/${appId}/public/data/loanRequests`),{// New collection for loan requests\nuserId:auth.currentUser.uid,userName:userProfile.name,loanType:loanType,amount:amount,repaymentPeriod:period,interestRate:terms.rate,collateralLink:collateralLink,downPayment:loanType==='Mortgage Loan'?parseFloat(downPayment):0,propertyRegion:loanType==='Mortgage Loan'?propertyRegion:'',creditScore:userProfile.creditScore,status:'Pending',// Set status to pending\ntimestamp:new Date().toISOString()});alert(`Loan application for ${amount.toFixed(2)} RUB submitted. Awaiting admin approval.`);setLoanAmount('');setRepaymentPeriod('');setCollateralLink('');setDownPayment('');setPropertyRegion('');}catch(error){console.error(\"Error submitting loan application:\",error);alert(`Failed to submit loan application: ${error.message}`);}};// Calculate estimated monthly loan payment\nconst calculateLoan=e=>{e.preventDefault();const amount=parseFloat(loanAmount);const period=parseInt(repaymentPeriod);const terms=getLoanTerms(userProfile.creditScore,loanType,amount);const rate=terms.rate;// Use the dynamic rate\nif(isNaN(amount)||amount<=0||isNaN(period)||period<=0||isNaN(rate)||rate<0){setMonthlyPayment(0);setInterestRate('N/A');return;}const monthlyRate=rate/12;const calculatedPayment=amount*(monthlyRate*Math.pow(1+monthlyRate,period))/(Math.pow(1+monthlyRate,period)-1);setMonthlyPayment(isNaN(calculatedPayment)?0:calculatedPayment);setInterestRate((rate*100).toFixed(2)+'%');// Display as percentage\n};const currentLoanTerms=getLoanTerms(userProfile.creditScore,loanType,parseFloat(loanAmount)||0);return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-4xl font-extrabold mb-8 text-center drop-shadow-sm\",style:{color:COLORS.primaryAccent},children:\"\\uD83E\\uDDFE Loan & Credit System\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"mb-12\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-3xl font-bold mb-6\",style:{color:COLORS.typography},children:\"Apply for a Loan\"}),/*#__PURE__*/_jsx(GlassCard,{className:\"p-8\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleApplyForLoan,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"loanType\",className:\"block text-lg font-medium mb-2\",style:{color:COLORS.typography},children:\"Loan Type\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"loanType\",value:loanType,onChange:e=>setLoanType(e.target.value),className:\"w-full p-3 border border-gray-600 rounded-lg\",style:{backgroundColor:COLORS.secondaryAccent,color:COLORS.typography},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Personal Loan\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Mortgage Loan\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Business Loan\"}),\" \"]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Loan Amount (RUB)\",value:loanAmount,onChange:e=>setLoanAmount(e.target.value),className:\"w-full p-3 border border-gray-600 rounded-lg\",style:{backgroundColor:COLORS.secondaryAccent,color:COLORS.typography},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Repayment Period (Months)\",value:repaymentPeriod,onChange:e=>setRepaymentPeriod(e.target.value),className:\"w-full p-3 border border-gray-600 rounded-lg\",style:{backgroundColor:COLORS.secondaryAccent,color:COLORS.typography},required:true}),loanType==='Mortgage Loan'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Down Payment (RUB)\",value:downPayment,onChange:e=>setDownPayment(e.target.value),className:\"w-full p-3 border border-gray-600 rounded-lg\",style:{backgroundColor:COLORS.secondaryAccent,color:COLORS.typography},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Property Registered Region (e.g., Volga Valley)\",value:propertyRegion,onChange:e=>setPropertyRegion(e.target.value),className:\"w-full p-3 border border-gray-600 rounded-lg\",style:{backgroundColor:COLORS.secondaryAccent,color:COLORS.typography},required:true})]}),currentLoanTerms.collateralRequired==='Yes'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"collateralLink\",className:\"block text-lg font-medium mb-2\",style:{color:COLORS.typography},children:\"Collateral Discord Message Link\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",id:\"collateralLink\",value:collateralLink,onChange:e=>setCollateralLink(e.target.value),placeholder:\"https://discord.com/channels/...\",className:\"w-full p-3 border border-gray-600 rounded-lg\",style:{backgroundColor:COLORS.secondaryAccent,color:COLORS.typography},required:true}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 italic mt-1\",children:\"Proof of asset pledged for collateral (e.g., vehicle, property, RP item).\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 italic\",children:\"Interest rates and penalties apply.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full font-bold py-3 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-all duration-300\",style:{backgroundColor:COLORS.primaryAccent,color:COLORS.background,boxShadow:`0 0 15px ${COLORS.buttonsGlow}`},children:\"Apply for Loan\"})]})})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"mb-12\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-3xl font-bold mb-6\",style:{color:COLORS.typography},children:\"Credit Score\"}),userProfile.hasCreditCard?/*#__PURE__*/// Only show detailed credit score if user has a credit card\n_jsxs(GlassCard,{className:\"p-8 text-center\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-extrabold\",style:{color:creditScoreInfo.color},children:[userProfile.creditScore,\" (\",creditScoreInfo.tier,\")\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-400 italic mt-2\",children:[\"Your Credit Score is based on:\",/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside text-left mx-auto max-w-md mt-4\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Account Open Duration: Longer is better.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Current Balance: Higher balances improve score.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Repayment Frequency: Payments before every Saturday (reporting date) improve score.\"})]})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-2xl font-semibold mt-8 mb-4\",style:{color:COLORS.primaryAccent},children:\"Credit Score Impact\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-left text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{style:{color:COLORS.primaryAccent},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-3\",children:\"Event/Behavior\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-3\",children:\"Score Impact\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-3\",children:\"Frequency\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{className:\"divide-y divide-gray-700\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3 text-green-500\",children:\"\\u2705 On-time Bill/Rent Pay\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"+6\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"per 8hr window\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3 text-green-500\",children:\"\\uD83D\\uDCB3 Low Credit Usage (<30%)\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"+4\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"per 8hr window\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3 text-green-500\",children:\"\\uD83D\\uDCBC Loan Repaid in Full\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"+40\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"One-time\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3 text-green-500\",children:\"\\uD83D\\uDCB8 Active Transfers / Use\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"+3\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"if done in cycle\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3 text-green-500\",children:\"\\uD83C\\uDFE6 Savings Grown > \\u20BD5k\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"+2\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"per 8hr window\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3 text-red-500\",children:\"\\u274C Late Payment\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"-15\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"per missed deadline\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3 text-red-500\",children:\"\\uD83D\\uDC80 Loan Default\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"-25\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"One-time\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3 text-red-500\",children:\"\\uD83D\\uDEA8 Overused Credit (>90%)\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"-10\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"per 8hr cycle\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3 text-red-500\",children:\"\\u26A0\\uFE0F Flagged by Auditor/Admin\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"-30\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Manual\"})]})]})]})}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-2xl font-semibold mt-8 mb-4\",style:{color:COLORS.primaryAccent},children:\"Credit Card Features\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside text-left mx-auto max-w-md\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Credit Limit: \\u20BD10,000 base (increases with score)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Score Boost: +4 per cycle of low usage (under 30%)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Missed Payment: -20 immediate drop\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Utilization: <30% = boost / 30\\u201390% = neutral / >90% = penalty\"})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-2xl font-semibold mt-8 mb-4\",style:{color:COLORS.primaryAccent},children:\"Your Credit Status\"}),/*#__PURE__*/_jsxs(GlassCard,{className:\"p-4 text-left\",style:{backgroundColor:COLORS.secondaryAccent},children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-bold\",style:{color:COLORS.primaryAccent},children:[\"Credit Score: \",userProfile.creditScore,\" (\",creditScoreInfo.tier,\")\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"Next Review In: 2h 38m (Simulated)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400\",children:\"Last Activity: Deposit \\u20BD3,200 (\\u2713 counted)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-500\",children:\"Warning: Missed rent payment last cycle (Simulated)\"})]})]}):/*#__PURE__*/// Prompt to apply for credit card if not already done\n_jsxs(GlassCard,{className:\"p-8 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-400\",children:\"Apply for a Credit Card to view your Credit Score and unlock related features.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleApplyForCreditCard,className:\"mt-4 font-bold py-2 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-all duration-300\",style:{backgroundColor:COLORS.primaryAccent,color:COLORS.background,boxShadow:`0 0 10px ${COLORS.buttonsGlow}`},children:\"Apply for Credit Card\"})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"mb-12\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-3xl font-bold mb-6\",style:{color:COLORS.typography},children:\"Loan Calculator\"}),/*#__PURE__*/_jsx(GlassCard,{className:\"p-8\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:calculateLoan,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"loanTypeCalc\",className:\"block text-lg font-medium mb-2\",style:{color:COLORS.typography},children:\"Loan Type\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"loanTypeCalc\",value:loanType,onChange:e=>setLoanType(e.target.value),className:\"w-full p-3 border border-gray-600 rounded-lg\",style:{backgroundColor:COLORS.secondaryAccent,color:COLORS.typography},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Personal Loan\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Mortgage Loan\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Business Loan\"})]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Loan Amount\",value:loanAmount,onChange:e=>setLoanAmount(e.target.value),className:\"w-full p-3 border border-gray-600 rounded-lg\",style:{backgroundColor:COLORS.secondaryAccent,color:COLORS.typography}}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Repayment Period (Months)\",value:repaymentPeriod,onChange:e=>setRepaymentPeriod(e.target.value),className:\"w-full p-3 border border-gray-600 rounded-lg\",style:{backgroundColor:COLORS.secondaryAccent,color:COLORS.typography}}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-semibold\",style:{color:COLORS.primaryAccent},children:[\"Calculated Interest Rate: \",interestRate||'N/A']}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full font-bold py-3 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-all duration-300\",style:{backgroundColor:COLORS.primaryAccent,color:COLORS.background,boxShadow:`0 0 15px ${COLORS.buttonsGlow}`},children:\"Calculate Schedule\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 rounded-lg\",style:{backgroundColor:COLORS.tertiary,color:COLORS.typography},children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold\",style:{color:COLORS.primaryAccent},children:[\"Estimated Monthly Payment: \",monthlyPayment.toFixed(2),\" RUB\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400\",children:\"Full repayment schedule would appear here.\"})]})]})})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"mb-12\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-3xl font-bold mb-6\",style:{color:COLORS.typography},children:\"\\uD83C\\uDFDB\\uFE0F Loan Collateral Policy System\"}),/*#__PURE__*/_jsxs(GlassCard,{className:\"p-8\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-2xl font-semibold mb-4\",style:{color:COLORS.primaryAccent},children:\"When is Collateral Required?\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto mb-6\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-left text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{style:{color:COLORS.primaryAccent},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-3\",children:\"Loan Type\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-3\",children:\"Loan Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-3\",children:\"Credit Score\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-3\",children:\"Collateral Required?\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{className:\"divide-y divide-gray-700\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Personal Loan\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"\\u2264 \\u20BD1,000,000\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"600+\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"\\u274C Optional\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Personal Loan\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"> \\u20BD1,000,000\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"< 650\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"\\u2705 Yes \\u2013 must list item(s)\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Mortgage Loan\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Any amount\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Any\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"\\u2705 Always \\u2013 the home is the collateral\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Business Loan\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"\\u2264 \\u20BD5,000,000\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"650+\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"\\u274C Optional\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Business Loan\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"> \\u20BD5,000,000\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"< 700\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"\\u2705 Yes \\u2013 must list business assets\"})]})]})]})}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-2xl font-semibold mb-4\",style:{color:COLORS.primaryAccent},children:\"Accepted Collateral Types (Examples)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-left text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{style:{color:COLORS.primaryAccent},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-3\",children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-3\",children:\"Applies To\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-3\",children:\"Example Entries\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{className:\"divide-y divide-gray-700\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Property\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Mortgage/High-Value\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Registered home, land, etc.\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Vehicles\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Personal/Business\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Trucks, cars, specialty equipment\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Business Assets\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Business Loans\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Storefront, inventory, machinery\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Bonds & Securities\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Personal/Investment\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"In-app investment account items\"})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"RP-Custom Items\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"All types\"}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-3\",children:\"Custom RP assets: crypto, vessels, etc.\"})]})]})]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 italic mt-4\",children:\"\\u26A0\\uFE0F Value of collateral must be at least 50\\u201375% of the loan amount.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 italic mt-2\",children:\"\\uD83D\\uDCBC Admin Workflow: Users input assets during loan application. System stores in \\u201CCollateral Ledger\\u201D attached to loan ID. If loan defaults, admin may seize assets (RP enforcement or flagging system). Assets cannot be sold/transferred while tied to active loan.\"})]})]})]});};export default LoanCreditSystemLayout;","map":{"version":3,"names":["React","useState","doc","updateDoc","addDoc","collection","GlassCard","COLORS","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoanCreditSystemLayout","_ref","userProfile","setUserProfile","db","appId","auth","loanType","setLoanType","loanAmount","setLoanAmount","repaymentPeriod","setRepaymentPeriod","interestRate","setInterestRate","monthlyPayment","setMonthlyPayment","collateralLink","setCollateralLink","downPayment","setDownPayment","propertyRegion","setPropertyRegion","getCreditScoreTier","score","tier","color","primaryAccent","description","creditScoreInfo","creditScore","getLoanTerms","type","amount","max","rate","minTerm","maxTerm","collateralRequired","handleApplyForCreditCard","userId","currentUser","uid","userName","name","employmentInfo","creditAgreement","status","timestamp","Date","toISOString","alert","error","console","message","handleApplyForLoan","e","preventDefault","parseFloat","period","parseInt","terms","isNaN","toLocaleString","loanHistory","some","loan","sixtyDaysAgo","setDate","getDate","recentMissedPayments","filter","date","length","minDownPayment","region","toFixed","calculateLoan","monthlyRate","calculatedPayment","Math","pow","currentLoanTerms","className","children","style","typography","onSubmit","htmlFor","id","value","onChange","target","backgroundColor","secondaryAccent","placeholder","required","background","boxShadow","buttonsGlow","hasCreditCard","onClick","tertiary"],"sources":["C:/Users/trent/OneDrive/Desktop/SberBank Website/src/components/LoanCreditSystemLayout.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { doc, updateDoc, addDoc, collection } from 'firebase/firestore'; // Added addDoc, collection\r\nimport GlassCard from './common/GlassCard';\r\nimport { COLORS } from '../constants';\r\n\r\nconst LoanCreditSystemLayout = ({ userProfile, setUserProfile, db, appId, auth }) => {\r\n    const [loanType, setLoanType] = useState('Personal Loan'); // New: Loan type selection\r\n    const [loanAmount, setLoanAmount] = useState('');\r\n    const [repaymentPeriod, setRepaymentPeriod] = useState('');\r\n    const [interestRate, setInterestRate] = useState(''); // This will be dynamically set or calculated\r\n    const [monthlyPayment, setMonthlyPayment] = useState(0);\r\n    const [collateralLink, setCollateralLink] = useState(''); // New: For collateral proof\r\n    const [downPayment, setDownPayment] = useState(''); // New: For mortgage down payment\r\n    const [propertyRegion, setPropertyRegion] = useState(''); // New: For mortgage property region\r\n\r\n    // Function to determine credit score tier and associated information\r\n    const getCreditScoreTier = (score) => {\r\n        if (score >= 800) return { tier: 'Excellent', color: COLORS.primaryAccent, description: 'VIP status, priority approval' };\r\n        if (score >= 750) return { tier: 'Very Good', color: COLORS.primaryAccent, description: 'Preferred rates, better limits' };\r\n        if (score >= 650) return { tier: 'Good', color: COLORS.primaryAccent, description: 'Credit card access, standard loans' };\r\n        if (score >= 550) return { tier: 'Fair', color: 'orange', description: 'Small loans; secured card eligibility' };\r\n        if (score >= 400) return { tier: 'Poor', color: 'red', description: 'No credit card access; loan denial' };\r\n        return { tier: 'Very Poor', color: 'darkred', description: 'No credit privileges, high risk' };\r\n    };\r\n\r\n    const creditScoreInfo = getCreditScoreTier(userProfile.creditScore);\r\n\r\n    // Get loan terms based on type and credit score\r\n    const getLoanTerms = (score, type, amount) => {\r\n        if (type === 'Personal Loan') {\r\n            if (score >= 700) return { max: 3000000, rate: 0.05, minTerm: 12, maxTerm: 36, collateralRequired: amount > 1000000 ? 'Optional' : 'No' };\r\n            if (score >= 600) return { max: 1000000, rate: 0.065, minTerm: 6, maxTerm: 24, collateralRequired: 'No' };\r\n            if (score < 600) return { max: 250000, rate: 0.09, minTerm: 3, maxTerm: 12, collateralRequired: 'Yes' };\r\n        } else if (type === 'Mortgage Loan') {\r\n            if (score >= 700) return { max: 10000000, rate: 0.045, minTerm: 60, maxTerm: 60, collateralRequired: 'Always' };\r\n            if (score >= 600) return { max: 5000000, rate: 0.06, minTerm: 48, maxTerm: 48, collateralRequired: 'Always' };\r\n            if (score < 600) return { max: 0, rate: 0, minTerm: 0, maxTerm: 0, collateralRequired: 'Not Eligible' };\r\n        } else if (type === 'Business Loan') { // Placeholder for Business Loans\r\n            if (score >= 650 && amount <= 5000000) return { max: 5000000, rate: 0.05, minTerm: 12, maxTerm: 36, collateralRequired: 'Optional' };\r\n            if (score < 700 && amount > 5000000) return { max: 10000000, rate: 0.07, minTerm: 24, maxTerm: 48, collateralRequired: 'Yes' };\r\n        }\r\n        return { max: 0, rate: 0, minTerm: 0, maxTerm: 0, collateralRequired: 'N/A' };\r\n    };\r\n\r\n    // Handle credit card application\r\n    const handleApplyForCreditCard = async () => {\r\n        try {\r\n            // Submit request for admin approval\r\n            await addDoc(collection(db, `artifacts/${appId}/public/data/creditCardRequests`), {\r\n                userId: auth.currentUser.uid,\r\n                userName: userProfile.name,\r\n                creditScore: userProfile.creditScore,\r\n                employmentInfo: 'Simulated Employment Info', // Placeholder\r\n                creditAgreement: 'AGREE', // Placeholder\r\n                status: 'Pending', // Status will be updated by admin or automated check\r\n                timestamp: new Date().toISOString()\r\n            });\r\n\r\n            alert('Credit Card application submitted. Check your dashboard for status updates (may be auto-approved based on score).');\r\n        } catch (error) {\r\n            console.error(\"Error submitting credit card application:\", error);\r\n            alert(`Failed to submit Credit Card application: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    // Handle loan application\r\n    const handleApplyForLoan = async (e) => {\r\n        e.preventDefault();\r\n        const amount = parseFloat(loanAmount);\r\n        const period = parseInt(repaymentPeriod);\r\n        const terms = getLoanTerms(userProfile.creditScore, loanType, amount);\r\n\r\n        if (isNaN(amount) || amount <= 0 || isNaN(period) || period <= 0) {\r\n            alert('Please enter valid loan amount and repayment period.');\r\n            return;\r\n        }\r\n\r\n        if (amount > terms.max) {\r\n            alert(`Loan amount exceeds maximum allowed for your credit score (${userProfile.creditScore}) and loan type. Max: ‚ÇΩ${terms.max.toLocaleString()}.`);\r\n            return;\r\n        }\r\n        if (period < terms.minTerm || period > terms.maxTerm) {\r\n            alert(`Repayment period must be between ${terms.minTerm} and ${terms.maxTerm} months for your loan type and credit score.`);\r\n            return;\r\n        }\r\n\r\n        // Check for active personal loans (only 1 allowed)\r\n        if (loanType === 'Personal Loan' && userProfile.loanHistory.some(loan => loan.type === 'Personal Loan' && loan.status === 'Active')) {\r\n            alert('You already have an active Personal Loan. Only one active personal loan is allowed at a time.');\r\n            return;\r\n        }\r\n\r\n        // Check for missed payments (denial if 2+ in past 60 RP days)\r\n        const sixtyDaysAgo = new Date();\r\n        sixtyDaysAgo.setDate(sixtyDaysAgo.getDate() - 60);\r\n        const recentMissedPayments = userProfile.loanHistory.filter(loan =>\r\n            loan.status === 'Missed Payment' && new Date(loan.date) > sixtyDaysAgo\r\n        ).length;\r\n\r\n        if (recentMissedPayments >= 2) {\r\n            alert('Your loan application is denied due to 2 or more missed payments in the past 60 RP days.');\r\n            return;\r\n        }\r\n\r\n        // Collateral checks\r\n        if (terms.collateralRequired === 'Yes' && !collateralLink) {\r\n            alert('Collateral is required for this loan. Please provide a Discord message link for your asset.');\r\n            return;\r\n        }\r\n        if (loanType === 'Mortgage Loan') {\r\n            const minDownPayment = 500000;\r\n            if (parseFloat(downPayment) < minDownPayment) {\r\n                alert(`Minimum down payment for Mortgage is ‚ÇΩ${minDownPayment.toLocaleString()}.`);\r\n                return;\r\n            }\r\n            if (propertyRegion !== userProfile.region) {\r\n                alert('Property must be in your registered RP region.');\r\n                return;\r\n            }\r\n            // Simulate property inspection\r\n            alert('Simulating property inspection... (This would be an automated check)');\r\n        }\r\n\r\n        try {\r\n            // Submit loan request for admin approval\r\n            await addDoc(collection(db, `artifacts/${appId}/public/data/loanRequests`), { // New collection for loan requests\r\n                userId: auth.currentUser.uid,\r\n                userName: userProfile.name,\r\n                loanType: loanType,\r\n                amount: amount,\r\n                repaymentPeriod: period,\r\n                interestRate: terms.rate,\r\n                collateralLink: collateralLink,\r\n                downPayment: loanType === 'Mortgage Loan' ? parseFloat(downPayment) : 0,\r\n                propertyRegion: loanType === 'Mortgage Loan' ? propertyRegion : '',\r\n                creditScore: userProfile.creditScore,\r\n                status: 'Pending', // Set status to pending\r\n                timestamp: new Date().toISOString()\r\n            });\r\n            alert(`Loan application for ${amount.toFixed(2)} RUB submitted. Awaiting admin approval.`);\r\n            setLoanAmount('');\r\n            setRepaymentPeriod('');\r\n            setCollateralLink('');\r\n            setDownPayment('');\r\n            setPropertyRegion('');\r\n        } catch (error) {\r\n            console.error(\"Error submitting loan application:\", error);\r\n            alert(`Failed to submit loan application: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    // Calculate estimated monthly loan payment\r\n    const calculateLoan = (e) => {\r\n        e.preventDefault();\r\n        const amount = parseFloat(loanAmount);\r\n        const period = parseInt(repaymentPeriod);\r\n        const terms = getLoanTerms(userProfile.creditScore, loanType, amount);\r\n        const rate = terms.rate; // Use the dynamic rate\r\n\r\n        if (isNaN(amount) || amount <= 0 || isNaN(period) || period <= 0 || isNaN(rate) || rate < 0) {\r\n            setMonthlyPayment(0);\r\n            setInterestRate('N/A');\r\n            return;\r\n        }\r\n\r\n        const monthlyRate = rate / 12;\r\n        const calculatedPayment = amount * (monthlyRate * Math.pow(1 + monthlyRate, period)) / (Math.pow(1 + monthlyRate, period) - 1);\r\n        setMonthlyPayment(isNaN(calculatedPayment) ? 0 : calculatedPayment);\r\n        setInterestRate((rate * 100).toFixed(2) + '%'); // Display as percentage\r\n    };\r\n\r\n    const currentLoanTerms = getLoanTerms(userProfile.creditScore, loanType, parseFloat(loanAmount) || 0);\r\n\r\n\r\n    return (\r\n        <div className=\"container mx-auto px-4 py-8\">\r\n            <h2 className=\"text-4xl font-extrabold mb-8 text-center drop-shadow-sm\" style={{ color: COLORS.primaryAccent }}>üßæ Loan & Credit System</h2>\r\n\r\n            {/* Apply for Loans Section */}\r\n            <section className=\"mb-12\">\r\n                <h3 className=\"text-3xl font-bold mb-6\" style={{ color: COLORS.typography }}>Apply for a Loan</h3>\r\n                <GlassCard className=\"p-8\">\r\n                    <form onSubmit={handleApplyForLoan} className=\"space-y-4\">\r\n                        <div>\r\n                            <label htmlFor=\"loanType\" className=\"block text-lg font-medium mb-2\" style={{ color: COLORS.typography }}>Loan Type</label>\r\n                            <select id=\"loanType\" value={loanType} onChange={(e) => setLoanType(e.target.value)} className=\"w-full p-3 border border-gray-600 rounded-lg\" style={{ backgroundColor: COLORS.secondaryAccent, color: COLORS.typography }}>\r\n                                <option>Personal Loan</option>\r\n                                <option>Mortgage Loan</option>\r\n                                <option>Business Loan</option> {/* Added Business Loan option */}\r\n                            </select>\r\n                        </div>\r\n                        <input type=\"number\" placeholder=\"Loan Amount (RUB)\" value={loanAmount} onChange={(e) => setLoanAmount(e.target.value)} className=\"w-full p-3 border border-gray-600 rounded-lg\" style={{ backgroundColor: COLORS.secondaryAccent, color: COLORS.typography }} required />\r\n                        <input type=\"number\" placeholder=\"Repayment Period (Months)\" value={repaymentPeriod} onChange={(e) => setRepaymentPeriod(e.target.value)} className=\"w-full p-3 border border-gray-600 rounded-lg\" style={{ backgroundColor: COLORS.secondaryAccent, color: COLORS.typography }} required />\r\n\r\n                        {loanType === 'Mortgage Loan' && (\r\n                            <>\r\n                                <input type=\"number\" placeholder=\"Down Payment (RUB)\" value={downPayment} onChange={(e) => setDownPayment(e.target.value)} className=\"w-full p-3 border border-gray-600 rounded-lg\" style={{ backgroundColor: COLORS.secondaryAccent, color: COLORS.typography }} required />\r\n                                <input type=\"text\" placeholder=\"Property Registered Region (e.g., Volga Valley)\" value={propertyRegion} onChange={(e) => setPropertyRegion(e.target.value)} className=\"w-full p-3 border border-gray-600 rounded-lg\" style={{ backgroundColor: COLORS.secondaryAccent, color: COLORS.typography }} required />\r\n                            </>\r\n                        )}\r\n\r\n                        {currentLoanTerms.collateralRequired === 'Yes' && (\r\n                            <div>\r\n                                <label htmlFor=\"collateralLink\" className=\"block text-lg font-medium mb-2\" style={{ color: COLORS.typography }}>Collateral Discord Message Link</label>\r\n                                <input type=\"url\" id=\"collateralLink\" value={collateralLink} onChange={(e) => setCollateralLink(e.target.value)} placeholder=\"https://discord.com/channels/...\" className=\"w-full p-3 border border-gray-600 rounded-lg\" style={{ backgroundColor: COLORS.secondaryAccent, color: COLORS.typography }} required />\r\n                                <p className=\"text-sm text-gray-400 italic mt-1\">Proof of asset pledged for collateral (e.g., vehicle, property, RP item).</p>\r\n                            </div>\r\n                        )}\r\n\r\n                        <p className=\"text-sm text-gray-400 italic\">Interest rates and penalties apply.</p>\r\n                        <button type=\"submit\" className=\"w-full font-bold py-3 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-all duration-300\" style={{ backgroundColor: COLORS.primaryAccent, color: COLORS.background, boxShadow: `0 0 15px ${COLORS.buttonsGlow}` }}>Apply for Loan</button>\r\n                    </form>\r\n                </GlassCard>\r\n            </section>\r\n\r\n            {/* Credit Score System (Conditional Visibility) */}\r\n            <section className=\"mb-12\">\r\n                <h3 className=\"text-3xl font-bold mb-6\" style={{ color: COLORS.typography }}>Credit Score</h3>\r\n                {userProfile.hasCreditCard ? ( // Only show detailed credit score if user has a credit card\r\n                    <GlassCard className=\"p-8 text-center\">\r\n                        <p className=\"text-3xl font-extrabold\" style={{ color: creditScoreInfo.color }}>{userProfile.creditScore} ({creditScoreInfo.tier})</p>\r\n                        <p className=\"text-gray-400 italic mt-2\">\r\n                            Your Credit Score is based on:\r\n                            <ul className=\"list-disc list-inside text-left mx-auto max-w-md mt-4\">\r\n                                <li>Account Open Duration: Longer is better.</li>\r\n                                <li>Current Balance: Higher balances improve score.</li>\r\n                                <li>Repayment Frequency: Payments before every Saturday (reporting date) improve score.</li>\r\n                            </ul>\r\n                        </p>\r\n                        <h4 className=\"text-2xl font-semibold mt-8 mb-4\" style={{ color: COLORS.primaryAccent }}>Credit Score Impact</h4>\r\n                        <div className=\"overflow-x-auto\">\r\n                            <table className=\"min-w-full text-left text-sm\">\r\n                                <thead style={{ color: COLORS.primaryAccent }}>\r\n                                    <tr>\r\n                                        <th className=\"py-2 px-3\">Event/Behavior</th>\r\n                                        <th className=\"py-2 px-3\">Score Impact</th>\r\n                                        <th className=\"py-2 px-3\">Frequency</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody className=\"divide-y divide-gray-700\">\r\n                                    <tr><td className=\"py-2 px-3 text-green-500\">‚úÖ On-time Bill/Rent Pay</td><td className=\"py-2 px-3\">+6</td><td className=\"py-2 px-3\">per 8hr window</td></tr>\r\n                                    <tr><td className=\"py-2 px-3 text-green-500\">üí≥ Low Credit Usage (&lt;30%)</td><td className=\"py-2 px-3\">+4</td><td className=\"py-2 px-3\">per 8hr window</td></tr>\r\n                                    <tr><td className=\"py-2 px-3 text-green-500\">üíº Loan Repaid in Full</td><td className=\"py-2 px-3\">+40</td><td className=\"py-2 px-3\">One-time</td></tr>\r\n                                    <tr><td className=\"py-2 px-3 text-green-500\">üí∏ Active Transfers / Use</td><td className=\"py-2 px-3\">+3</td><td className=\"py-2 px-3\">if done in cycle</td></tr>\r\n                                    <tr><td className=\"py-2 px-3 text-green-500\">üè¶ Savings Grown &gt; ‚ÇΩ5k</td><td className=\"py-2 px-3\">+2</td><td className=\"py-2 px-3\">per 8hr window</td></tr>\r\n                                    <tr><td className=\"py-2 px-3 text-red-500\">‚ùå Late Payment</td><td className=\"py-2 px-3\">-15</td><td className=\"py-2 px-3\">per missed deadline</td></tr>\r\n                                    <tr><td className=\"py-2 px-3 text-red-500\">üíÄ Loan Default</td><td className=\"py-2 px-3\">-25</td><td className=\"py-2 px-3\">One-time</td></tr>\r\n                                    <tr><td className=\"py-2 px-3 text-red-500\">üö® Overused Credit (&gt;90%)</td><td className=\"py-2 px-3\">-10</td><td className=\"py-2 px-3\">per 8hr cycle</td></tr>\r\n                                    <tr><td className=\"py-2 px-3 text-red-500\">‚ö†Ô∏è Flagged by Auditor/Admin</td><td className=\"py-2 px-3\">-30</td><td className=\"py-2 px-3\">Manual</td></tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n\r\n                        <h4 className=\"text-2xl font-semibold mt-8 mb-4\" style={{ color: COLORS.primaryAccent }}>Credit Card Features</h4>\r\n                        <ul className=\"list-disc list-inside text-left mx-auto max-w-md\">\r\n                            <li>Credit Limit: ‚ÇΩ10,000 base (increases with score)</li>\r\n                            <li>Score Boost: +4 per cycle of low usage (under 30%)</li>\r\n                            <li>Missed Payment: -20 immediate drop</li>\r\n                            <li>Utilization: &lt;30% = boost / 30‚Äì90% = neutral / &gt;90% = penalty</li>\r\n                        </ul>\r\n\r\n                        <h4 className=\"text-2xl font-semibold mt-8 mb-4\" style={{ color: COLORS.primaryAccent }}>Your Credit Status</h4>\r\n                        <GlassCard className=\"p-4 text-left\" style={{ backgroundColor: COLORS.secondaryAccent }}>\r\n                            <p className=\"text-lg font-bold\" style={{ color: COLORS.primaryAccent }}>Credit Score: {userProfile.creditScore} ({creditScoreInfo.tier})</p>\r\n                            <p className=\"text-sm text-gray-400 mt-2\">Next Review In: 2h 38m (Simulated)</p>\r\n                            <p className=\"text-sm text-gray-400\">Last Activity: Deposit ‚ÇΩ3,200 (‚úì counted)</p>\r\n                            <p className=\"text-sm text-red-500\">Warning: Missed rent payment last cycle (Simulated)</p>\r\n                        </GlassCard>\r\n                    </GlassCard>\r\n                ) : (\r\n                    // Prompt to apply for credit card if not already done\r\n                    <GlassCard className=\"p-8 text-center\">\r\n                        <p className=\"text-lg text-gray-400\">Apply for a Credit Card to view your Credit Score and unlock related features.</p>\r\n                        <button onClick={handleApplyForCreditCard} className=\"mt-4 font-bold py-2 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-all duration-300\" style={{ backgroundColor: COLORS.primaryAccent, color: COLORS.background, boxShadow: `0 0 10px ${COLORS.buttonsGlow}` }}>Apply for Credit Card</button>\r\n                    </GlassCard>\r\n                )}\r\n            </section>\r\n\r\n            {/* Loan Calculator Section */}\r\n            <section className=\"mb-12\">\r\n                <h3 className=\"text-3xl font-bold mb-6\" style={{ color: COLORS.typography }}>Loan Calculator</h3>\r\n                <GlassCard className=\"p-8\">\r\n                    <form onSubmit={calculateLoan} className=\"space-y-4\">\r\n                        <div>\r\n                            <label htmlFor=\"loanTypeCalc\" className=\"block text-lg font-medium mb-2\" style={{ color: COLORS.typography }}>Loan Type</label>\r\n                            <select id=\"loanTypeCalc\" value={loanType} onChange={(e) => setLoanType(e.target.value)} className=\"w-full p-3 border border-gray-600 rounded-lg\" style={{ backgroundColor: COLORS.secondaryAccent, color: COLORS.typography }}>\r\n                                <option>Personal Loan</option>\r\n                                <option>Mortgage Loan</option>\r\n                                <option>Business Loan</option>\r\n                            </select>\r\n                        </div>\r\n                        <input type=\"number\" placeholder=\"Loan Amount\" value={loanAmount} onChange={(e) => setLoanAmount(e.target.value)} className=\"w-full p-3 border border-gray-600 rounded-lg\" style={{ backgroundColor: COLORS.secondaryAccent, color: COLORS.typography }} />\r\n                        <input type=\"number\" placeholder=\"Repayment Period (Months)\" value={repaymentPeriod} onChange={(e) => setRepaymentPeriod(e.target.value)} className=\"w-full p-3 border border-gray-600 rounded-lg\" style={{ backgroundColor: COLORS.secondaryAccent, color: COLORS.typography }} />\r\n                        {/* Interest Rate is now dynamically determined by loan type and credit score */}\r\n                        <p className=\"text-lg font-semibold\" style={{ color: COLORS.primaryAccent }}>Calculated Interest Rate: {interestRate || 'N/A'}</p>\r\n                        <button type=\"submit\" className=\"w-full font-bold py-3 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-all duration-300\" style={{ backgroundColor: COLORS.primaryAccent, color: COLORS.background, boxShadow: `0 0 15px ${COLORS.buttonsGlow}` }}>Calculate Schedule</button>\r\n                        <div className=\"mt-4 p-4 rounded-lg\" style={{ backgroundColor: COLORS.tertiary, color: COLORS.typography }}>\r\n                            <p className=\"font-semibold\" style={{ color: COLORS.primaryAccent }}>Estimated Monthly Payment: {monthlyPayment.toFixed(2)} RUB</p>\r\n                            <p className=\"text-sm text-gray-400\">Full repayment schedule would appear here.</p>\r\n                        </div>\r\n                    </form>\r\n                </GlassCard>\r\n            </section>\r\n\r\n            {/* Collateral Policy System (Informational) */}\r\n            <section className=\"mb-12\">\r\n                <h3 className=\"text-3xl font-bold mb-6\" style={{ color: COLORS.typography }}>üèõÔ∏è Loan Collateral Policy System</h3>\r\n                <GlassCard className=\"p-8\">\r\n                    <h4 className=\"text-2xl font-semibold mb-4\" style={{ color: COLORS.primaryAccent }}>When is Collateral Required?</h4>\r\n                    <div className=\"overflow-x-auto mb-6\">\r\n                        <table className=\"min-w-full text-left text-sm\">\r\n                            <thead style={{ color: COLORS.primaryAccent }}>\r\n                                <tr>\r\n                                    <th className=\"py-2 px-3\">Loan Type</th>\r\n                                    <th className=\"py-2 px-3\">Loan Amount</th>\r\n                                    <th className=\"py-2 px-3\">Credit Score</th>\r\n                                    <th className=\"py-2 px-3\">Collateral Required?</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-gray-700\">\r\n                                <tr><td className=\"py-2 px-3\">Personal Loan</td><td className=\"py-2 px-3\">‚â§ ‚ÇΩ1,000,000</td><td className=\"py-2 px-3\">600+</td><td className=\"py-2 px-3\">‚ùå Optional</td></tr>\r\n                                <tr><td className=\"py-2 px-3\">Personal Loan</td><td className=\"py-2 px-3\">> ‚ÇΩ1,000,000</td><td className=\"py-2 px-3\">&lt; 650</td><td className=\"py-2 px-3\">‚úÖ Yes ‚Äì must list item(s)</td></tr>\r\n                                <tr><td className=\"py-2 px-3\">Mortgage Loan</td><td className=\"py-2 px-3\">Any amount</td><td className=\"py-2 px-3\">Any</td><td className=\"py-2 px-3\">‚úÖ Always ‚Äì the home is the collateral</td></tr>\r\n                                <tr><td className=\"py-2 px-3\">Business Loan</td><td className=\"py-2 px-3\">‚â§ ‚ÇΩ5,000,000</td><td className=\"py-2 px-3\">650+</td><td className=\"py-2 px-3\">‚ùå Optional</td></tr>\r\n                                <tr><td className=\"py-2 px-3\">Business Loan</td><td className=\"py-2 px-3\">> ‚ÇΩ5,000,000</td><td className=\"py-2 px-3\">&lt; 700</td><td className=\"py-2 px-3\">‚úÖ Yes ‚Äì must list business assets</td></tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    <h4 className=\"text-2xl font-semibold mb-4\" style={{ color: COLORS.primaryAccent }}>Accepted Collateral Types (Examples)</h4>\r\n                    <div className=\"overflow-x-auto\">\r\n                        <table className=\"min-w-full text-left text-sm\">\r\n                            <thead style={{ color: COLORS.primaryAccent }}>\r\n                                <tr>\r\n                                    <th className=\"py-2 px-3\">Type</th>\r\n                                    <th className=\"py-2 px-3\">Applies To</th>\r\n                                    <th className=\"py-2 px-3\">Example Entries</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-gray-700\">\r\n                                <tr><td className=\"py-2 px-3\">Property</td><td className=\"py-2 px-3\">Mortgage/High-Value</td><td className=\"py-2 px-3\">Registered home, land, etc.</td></tr>\r\n                                <tr><td className=\"py-2 px-3\">Vehicles</td><td className=\"py-2 px-3\">Personal/Business</td><td className=\"py-2 px-3\">Trucks, cars, specialty equipment</td></tr>\r\n                                <tr><td className=\"py-2 px-3\">Business Assets</td><td className=\"py-2 px-3\">Business Loans</td><td className=\"py-2 px-3\">Storefront, inventory, machinery</td></tr>\r\n                                <tr><td className=\"py-2 px-3\">Bonds & Securities</td><td className=\"py-2 px-3\">Personal/Investment</td><td className=\"py-2 px-3\">In-app investment account items</td></tr>\r\n                                <tr><td className=\"py-2 px-3\">RP-Custom Items</td><td className=\"py-2 px-3\">All types</td><td className=\"py-2 px-3\">Custom RP assets: crypto, vessels, etc.</td></tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                    <p className=\"text-sm text-gray-400 italic mt-4\">‚ö†Ô∏è Value of collateral must be at least 50‚Äì75% of the loan amount.</p>\r\n                    <p className=\"text-sm text-gray-400 italic mt-2\">üíº Admin Workflow: Users input assets during loan application. System stores in ‚ÄúCollateral Ledger‚Äù attached to loan ID. If loan defaults, admin may seize assets (RP enforcement or flagging system). Assets cannot be sold/transferred while tied to active loan.</p>\r\n                </GlassCard>\r\n            </section>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoanCreditSystemLayout;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
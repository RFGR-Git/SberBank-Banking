{"ast":null,"code":"import React,{useState}from'react';import GlassCard from'../common/GlassCard';import{COLORS}from'../../constants';import{Shield,Lock,Search}from'lucide-react';import{doc,updateDoc,getDoc}from'firebase/firestore';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminSecurityTools=_ref=>{let{db,appId,findUserByDiscordOrBankId}=_ref;const[transactionOverrideId,setTransactionOverrideId]=useState('');const[globalLockActive,setGlobalLockActive]=useState(false);// State for global lock\nconst handleTransactionFreezeOverride=()=>{if(!transactionOverrideId){alert('Please enter a Transaction ID to override.');return;}alert(`Simulating override for transaction ID: ${transactionOverrideId}. (This requires complex transaction state management.)`);setTransactionOverrideId('');};const handleToggleGlobalLock=async()=>{try{// In a real application, this would update a global setting in Firestore\n// For now, we'll simulate it with a local state and an alert.\nconst newLockState=!globalLockActive;setGlobalLockActive(newLockState);// Update a conceptual global setting in Firestore (e.g., in an admin settings doc)\nconst adminSettingsRef=doc(db,`artifacts/${appId}/public/data/adminSettings`,'global');await updateDoc(adminSettingsRef,{isSystemLocked:newLockState});alert(`Global system lock is now ${newLockState?'ACTIVE':'INACTIVE'}. All user transactions are ${newLockState?'temporarily halted':'resumed'}.`);}catch(error){console.error(\"Error toggling global lock:\",error);alert(`Failed to toggle global lock: ${error.message}`);}};const handleViewInterbankLog=()=>{alert('Simulating viewing of interbank transfer logs. (Requires dedicated interbank transfer collection.)');};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 w-full\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-3xl font-bold mb-6\",style:{color:COLORS.typography},children:\"Security Tools\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-2xl font-semibold mb-4 flex items-center\",style:{color:COLORS.primaryAccent},children:[/*#__PURE__*/_jsx(Shield,{size:24,className:\"mr-2\"}),\" Transaction Freeze Override\"]}),/*#__PURE__*/_jsxs(GlassCard,{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Transaction ID\",value:transactionOverrideId,onChange:e=>setTransactionOverrideId(e.target.value),className:\"w-full p-3 border border-gray-600 rounded-lg mb-4\",style:{backgroundColor:COLORS.secondaryAccent,color:COLORS.typography}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleTransactionFreezeOverride,className:\"w-full font-bold py-2 px-6 rounded-lg shadow-md transition-all duration-200\",style:{backgroundColor:COLORS.primaryAccent,color:COLORS.background,boxShadow:`0 0 10px ${COLORS.buttonsGlow}`},children:\"Approve / Deny Flagged Transaction (Simulated)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 italic mt-2\",children:\"Manually approve or deny transactions on flagged or frozen accounts.\"})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-2xl font-semibold mb-4 flex items-center\",style:{color:COLORS.primaryAccent},children:[/*#__PURE__*/_jsx(Lock,{size:24,className:\"mr-2\"}),\" Force Emergency Lockdown\"]}),/*#__PURE__*/_jsxs(GlassCard,{className:\"p-6 text-center\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-semibold mb-4\",style:{color:COLORS.typography},children:[\"Current Global Lock Status: \",/*#__PURE__*/_jsx(\"span\",{style:{color:globalLockActive?COLORS.danger:COLORS.success},children:globalLockActive?'ACTIVE':'INACTIVE'})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleToggleGlobalLock,className:`w-full font-bold py-2 px-6 rounded-lg shadow-md transition-all duration-200 ${globalLockActive?'bg-green-600 hover:bg-green-500':'bg-red-800 hover:bg-red-700'}`,style:{boxShadow:`0 0 10px ${globalLockActive?'rgba(0,255,0,0.5)':'rgba(255,0,0,0.7)'}`},children:globalLockActive?'Deactivate Global Lock':'Activate Global Lock'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 italic mt-2\",children:\"Temporarily halts all transactions system-wide for emergency review.\"})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-2xl font-semibold mb-4 flex items-center\",style:{color:COLORS.primaryAccent},children:[/*#__PURE__*/_jsx(Search,{size:24,className:\"mr-2\"}),\" View Interbank Transfers Log\"]}),/*#__PURE__*/_jsxs(GlassCard,{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleViewInterbankLog,className:\"w-full font-bold py-2 px-6 rounded-lg shadow-md transition-all duration-200\",style:{backgroundColor:COLORS.primaryAccent,color:COLORS.background,boxShadow:`0 0 10px ${COLORS.buttonsGlow}`},children:\"View Logs (Simulated)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 italic mt-2\",children:\"View pending, approved, and flagged transfers between banks.\"})]})]})]});};export default AdminSecurityTools;","map":{"version":3,"names":["React","useState","GlassCard","COLORS","Shield","Lock","Search","doc","updateDoc","getDoc","jsx","_jsx","jsxs","_jsxs","AdminSecurityTools","_ref","db","appId","findUserByDiscordOrBankId","transactionOverrideId","setTransactionOverrideId","globalLockActive","setGlobalLockActive","handleTransactionFreezeOverride","alert","handleToggleGlobalLock","newLockState","adminSettingsRef","isSystemLocked","error","console","message","handleViewInterbankLog","className","children","style","color","typography","primaryAccent","size","type","placeholder","value","onChange","e","target","backgroundColor","secondaryAccent","onClick","background","boxShadow","buttonsGlow","danger","success"],"sources":["C:/Users/trent/OneDrive/Desktop/SberBank Website/src/components/admin/AdminSecurityTools.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport GlassCard from '../common/GlassCard';\r\nimport { COLORS } from '../../constants';\r\nimport { Shield, Lock, Search } from 'lucide-react';\r\nimport { doc, updateDoc, getDoc } from 'firebase/firestore';\r\n\r\nconst AdminSecurityTools = ({ db, appId, findUserByDiscordOrBankId }) => {\r\n    const [transactionOverrideId, setTransactionOverrideId] = useState('');\r\n    const [globalLockActive, setGlobalLockActive] = useState(false); // State for global lock\r\n\r\n    const handleTransactionFreezeOverride = () => {\r\n        if (!transactionOverrideId) {\r\n            alert('Please enter a Transaction ID to override.');\r\n            return;\r\n        }\r\n        alert(`Simulating override for transaction ID: ${transactionOverrideId}. (This requires complex transaction state management.)`);\r\n        setTransactionOverrideId('');\r\n    };\r\n\r\n    const handleToggleGlobalLock = async () => {\r\n        try {\r\n            // In a real application, this would update a global setting in Firestore\r\n            // For now, we'll simulate it with a local state and an alert.\r\n            const newLockState = !globalLockActive;\r\n            setGlobalLockActive(newLockState);\r\n\r\n            // Update a conceptual global setting in Firestore (e.g., in an admin settings doc)\r\n            const adminSettingsRef = doc(db, `artifacts/${appId}/public/data/adminSettings`, 'global');\r\n            await updateDoc(adminSettingsRef, { isSystemLocked: newLockState });\r\n\r\n            alert(`Global system lock is now ${newLockState ? 'ACTIVE' : 'INACTIVE'}. All user transactions are ${newLockState ? 'temporarily halted' : 'resumed'}.`);\r\n        } catch (error) {\r\n            console.error(\"Error toggling global lock:\", error);\r\n            alert(`Failed to toggle global lock: ${error.message}`);\r\n        }\r\n    };\r\n\r\n    const handleViewInterbankLog = () => {\r\n        alert('Simulating viewing of interbank transfer logs. (Requires dedicated interbank transfer collection.)');\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-8 w-full\">\r\n            <h3 className=\"text-3xl font-bold mb-6\" style={{ color: COLORS.typography }}>Security Tools</h3>\r\n\r\n            {/* Transaction Freeze Override */}\r\n            <section className=\"mb-8\">\r\n                <h4 className=\"text-2xl font-semibold mb-4 flex items-center\" style={{ color: COLORS.primaryAccent }}><Shield size={24} className=\"mr-2\" /> Transaction Freeze Override</h4>\r\n                <GlassCard className=\"p-6\">\r\n                    <input type=\"text\" placeholder=\"Transaction ID\" value={transactionOverrideId} onChange={(e) => setTransactionOverrideId(e.target.value)} className=\"w-full p-3 border border-gray-600 rounded-lg mb-4\" style={{ backgroundColor: COLORS.secondaryAccent, color: COLORS.typography }} />\r\n                    <button onClick={handleTransactionFreezeOverride} className=\"w-full font-bold py-2 px-6 rounded-lg shadow-md transition-all duration-200\" style={{ backgroundColor: COLORS.primaryAccent, color: COLORS.background, boxShadow: `0 0 10px ${COLORS.buttonsGlow}` }}>Approve / Deny Flagged Transaction (Simulated)</button>\r\n                    <p className=\"text-sm text-gray-400 italic mt-2\">Manually approve or deny transactions on flagged or frozen accounts.</p>\r\n                </GlassCard>\r\n            </section>\r\n\r\n            {/* Force Emergency Lockdown */}\r\n            <section className=\"mb-8\">\r\n                <h4 className=\"text-2xl font-semibold mb-4 flex items-center\" style={{ color: COLORS.primaryAccent }}><Lock size={24} className=\"mr-2\" /> Force Emergency Lockdown</h4>\r\n                <GlassCard className=\"p-6 text-center\">\r\n                    <p className=\"text-lg font-semibold mb-4\" style={{ color: COLORS.typography }}>Current Global Lock Status: <span style={{ color: globalLockActive ? COLORS.danger : COLORS.success }}>{globalLockActive ? 'ACTIVE' : 'INACTIVE'}</span></p>\r\n                    <button onClick={handleToggleGlobalLock} className={`w-full font-bold py-2 px-6 rounded-lg shadow-md transition-all duration-200 ${globalLockActive ? 'bg-green-600 hover:bg-green-500' : 'bg-red-800 hover:bg-red-700'}`} style={{ boxShadow: `0 0 10px ${globalLockActive ? 'rgba(0,255,0,0.5)' : 'rgba(255,0,0,0.7)'}` }}>\r\n                        {globalLockActive ? 'Deactivate Global Lock' : 'Activate Global Lock'}\r\n                    </button>\r\n                    <p className=\"text-sm text-gray-400 italic mt-2\">Temporarily halts all transactions system-wide for emergency review.</p>\r\n                </GlassCard>\r\n            </section>\r\n\r\n            {/* View Interbank Transfers Log */}\r\n            <section className=\"mb-8\">\r\n                <h4 className=\"text-2xl font-semibold mb-4 flex items-center\" style={{ color: COLORS.primaryAccent }}><Search size={24} className=\"mr-2\" /> View Interbank Transfers Log</h4>\r\n                <GlassCard className=\"p-6\">\r\n                    <button onClick={handleViewInterbankLog} className=\"w-full font-bold py-2 px-6 rounded-lg shadow-md transition-all duration-200\" style={{ backgroundColor: COLORS.primaryAccent, color: COLORS.background, boxShadow: `0 0 10px ${COLORS.buttonsGlow}` }}>View Logs (Simulated)</button>\r\n                    <p className=\"text-sm text-gray-400 italic mt-2\">View pending, approved, and flagged transfers between banks.</p>\r\n                </GlassCard>\r\n            </section>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminSecurityTools;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,SAAS,KAAM,qBAAqB,CAC3C,OAASC,MAAM,KAAQ,iBAAiB,CACxC,OAASC,MAAM,CAAEC,IAAI,CAAEC,MAAM,KAAQ,cAAc,CACnD,OAASC,GAAG,CAAEC,SAAS,CAAEC,MAAM,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5D,KAAM,CAAAC,kBAAkB,CAAGC,IAAA,EAA8C,IAA7C,CAAEC,EAAE,CAAEC,KAAK,CAAEC,yBAA0B,CAAC,CAAAH,IAAA,CAChE,KAAM,CAACI,qBAAqB,CAAEC,wBAAwB,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CACtE,KAAM,CAACoB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CAAE;AAEjE,KAAM,CAAAsB,+BAA+B,CAAGA,CAAA,GAAM,CAC1C,GAAI,CAACJ,qBAAqB,CAAE,CACxBK,KAAK,CAAC,4CAA4C,CAAC,CACnD,OACJ,CACAA,KAAK,CAAC,2CAA2CL,qBAAqB,yDAAyD,CAAC,CAChIC,wBAAwB,CAAC,EAAE,CAAC,CAChC,CAAC,CAED,KAAM,CAAAK,sBAAsB,CAAG,KAAAA,CAAA,GAAY,CACvC,GAAI,CACA;AACA;AACA,KAAM,CAAAC,YAAY,CAAG,CAACL,gBAAgB,CACtCC,mBAAmB,CAACI,YAAY,CAAC,CAEjC;AACA,KAAM,CAAAC,gBAAgB,CAAGpB,GAAG,CAACS,EAAE,CAAE,aAAaC,KAAK,4BAA4B,CAAE,QAAQ,CAAC,CAC1F,KAAM,CAAAT,SAAS,CAACmB,gBAAgB,CAAE,CAAEC,cAAc,CAAEF,YAAa,CAAC,CAAC,CAEnEF,KAAK,CAAC,6BAA6BE,YAAY,CAAG,QAAQ,CAAG,UAAU,+BAA+BA,YAAY,CAAG,oBAAoB,CAAG,SAAS,GAAG,CAAC,CAC7J,CAAE,MAAOG,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACnDL,KAAK,CAAC,iCAAiCK,KAAK,CAACE,OAAO,EAAE,CAAC,CAC3D,CACJ,CAAC,CAED,KAAM,CAAAC,sBAAsB,CAAGA,CAAA,GAAM,CACjCR,KAAK,CAAC,oGAAoG,CAAC,CAC/G,CAAC,CAED,mBACIX,KAAA,QAAKoB,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvBvB,IAAA,OAAIsB,SAAS,CAAC,yBAAyB,CAACE,KAAK,CAAE,CAAEC,KAAK,CAAEjC,MAAM,CAACkC,UAAW,CAAE,CAAAH,QAAA,CAAC,gBAAc,CAAI,CAAC,cAGhGrB,KAAA,YAASoB,SAAS,CAAC,MAAM,CAAAC,QAAA,eACrBrB,KAAA,OAAIoB,SAAS,CAAC,+CAA+C,CAACE,KAAK,CAAE,CAAEC,KAAK,CAAEjC,MAAM,CAACmC,aAAc,CAAE,CAAAJ,QAAA,eAACvB,IAAA,CAACP,MAAM,EAACmC,IAAI,CAAE,EAAG,CAACN,SAAS,CAAC,MAAM,CAAE,CAAC,+BAA4B,EAAI,CAAC,cAC5KpB,KAAA,CAACX,SAAS,EAAC+B,SAAS,CAAC,KAAK,CAAAC,QAAA,eACtBvB,IAAA,UAAO6B,IAAI,CAAC,MAAM,CAACC,WAAW,CAAC,gBAAgB,CAACC,KAAK,CAAEvB,qBAAsB,CAACwB,QAAQ,CAAGC,CAAC,EAAKxB,wBAAwB,CAACwB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAACT,SAAS,CAAC,mDAAmD,CAACE,KAAK,CAAE,CAAEW,eAAe,CAAE3C,MAAM,CAAC4C,eAAe,CAAEX,KAAK,CAAEjC,MAAM,CAACkC,UAAW,CAAE,CAAE,CAAC,cACvR1B,IAAA,WAAQqC,OAAO,CAAEzB,+BAAgC,CAACU,SAAS,CAAC,6EAA6E,CAACE,KAAK,CAAE,CAAEW,eAAe,CAAE3C,MAAM,CAACmC,aAAa,CAAEF,KAAK,CAAEjC,MAAM,CAAC8C,UAAU,CAAEC,SAAS,CAAE,YAAY/C,MAAM,CAACgD,WAAW,EAAG,CAAE,CAAAjB,QAAA,CAAC,gDAA8C,CAAQ,CAAC,cAC1TvB,IAAA,MAAGsB,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,sEAAoE,CAAG,CAAC,EAClH,CAAC,EACP,CAAC,cAGVrB,KAAA,YAASoB,SAAS,CAAC,MAAM,CAAAC,QAAA,eACrBrB,KAAA,OAAIoB,SAAS,CAAC,+CAA+C,CAACE,KAAK,CAAE,CAAEC,KAAK,CAAEjC,MAAM,CAACmC,aAAc,CAAE,CAAAJ,QAAA,eAACvB,IAAA,CAACN,IAAI,EAACkC,IAAI,CAAE,EAAG,CAACN,SAAS,CAAC,MAAM,CAAE,CAAC,4BAAyB,EAAI,CAAC,cACvKpB,KAAA,CAACX,SAAS,EAAC+B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAClCrB,KAAA,MAAGoB,SAAS,CAAC,4BAA4B,CAACE,KAAK,CAAE,CAAEC,KAAK,CAAEjC,MAAM,CAACkC,UAAW,CAAE,CAAAH,QAAA,EAAC,8BAA4B,cAAAvB,IAAA,SAAMwB,KAAK,CAAE,CAAEC,KAAK,CAAEf,gBAAgB,CAAGlB,MAAM,CAACiD,MAAM,CAAGjD,MAAM,CAACkD,OAAQ,CAAE,CAAAnB,QAAA,CAAEb,gBAAgB,CAAG,QAAQ,CAAG,UAAU,CAAO,CAAC,EAAG,CAAC,cAC3OV,IAAA,WAAQqC,OAAO,CAAEvB,sBAAuB,CAACQ,SAAS,CAAE,+EAA+EZ,gBAAgB,CAAG,iCAAiC,CAAG,6BAA6B,EAAG,CAACc,KAAK,CAAE,CAAEe,SAAS,CAAE,YAAY7B,gBAAgB,CAAG,mBAAmB,CAAG,mBAAmB,EAAG,CAAE,CAAAa,QAAA,CACvTb,gBAAgB,CAAG,wBAAwB,CAAG,sBAAsB,CACjE,CAAC,cACTV,IAAA,MAAGsB,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,sEAAoE,CAAG,CAAC,EAClH,CAAC,EACP,CAAC,cAGVrB,KAAA,YAASoB,SAAS,CAAC,MAAM,CAAAC,QAAA,eACrBrB,KAAA,OAAIoB,SAAS,CAAC,+CAA+C,CAACE,KAAK,CAAE,CAAEC,KAAK,CAAEjC,MAAM,CAACmC,aAAc,CAAE,CAAAJ,QAAA,eAACvB,IAAA,CAACL,MAAM,EAACiC,IAAI,CAAE,EAAG,CAACN,SAAS,CAAC,MAAM,CAAE,CAAC,gCAA6B,EAAI,CAAC,cAC7KpB,KAAA,CAACX,SAAS,EAAC+B,SAAS,CAAC,KAAK,CAAAC,QAAA,eACtBvB,IAAA,WAAQqC,OAAO,CAAEhB,sBAAuB,CAACC,SAAS,CAAC,6EAA6E,CAACE,KAAK,CAAE,CAAEW,eAAe,CAAE3C,MAAM,CAACmC,aAAa,CAAEF,KAAK,CAAEjC,MAAM,CAAC8C,UAAU,CAAEC,SAAS,CAAE,YAAY/C,MAAM,CAACgD,WAAW,EAAG,CAAE,CAAAjB,QAAA,CAAC,uBAAqB,CAAQ,CAAC,cACxRvB,IAAA,MAAGsB,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,8DAA4D,CAAG,CAAC,EAC1G,CAAC,EACP,CAAC,EACT,CAAC,CAEd,CAAC,CAED,cAAe,CAAApB,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}